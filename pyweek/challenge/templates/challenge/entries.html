{% extends "base.html" %}

{% block title %}{% autoescape off %}{{ challenge.pageTitle }}{% endautoescape %} &mdash; entries{% endblock %}

{% block content %}
<h1>{% autoescape off %}{{ challenge.pageTitle }}{% endautoescape %} &mdash; entries</h1>

<ul class="nav nav-tabs">
    <li><a href="{{challenge.get_absolute_url}}">Timetable</a></li>
    <li><a href="/{{ challenge.number}}/diaries/">Diaries</a></li>
    <li class="active"><a href="/{{ challenge.number}}/entries">Entries</a></li>
    {% if challenge.isAllDone %}<li><a href="/{{ challenge.number}}/ratings/">Rankings</a></li>{% endif %}
</ul>

{% if finished %}
<p>To play the games listed here, you may need to install <a
href="http://www.python.org/">Python</a> (typically 2.5+).
<a href="http://www.pygame.org/">PyGame</a>, <a href="http://www.pyglet.org/">pyglet</a> or
<a href="http://pyopengl.sourceforge.net/">PyOpenGL</a>. See the game's
README file for specific requirements. Windows or OS X users
downloading the versions of games specific to them shouldn't need to install anything.</p>

{% if challenge.torrent_url %}
<p>Please use <a href="http://btfaq.com/">BitTorrent</a> to download all the games if
you can - the site hosts will appreciate it.
The torrent file is <A href="{{ challenge.torrent_url }}">here</a>.</p>
{% endif %}

{% endif %}

<div id="entries">
{% for entry in entries %}
<div class="entry">
{% if entry.thumb %}
<a href="{{ entry.thumb.content.url }}"><img border="0" width="150" src="{{ entry.thumb.content.url }}-thumb.png"></a>
{% endif %}

<h3><a href="/e/{{ entry.name }}/">{{ entry.title }}</a>
  {% if entry.may_rate %}&mdash;
  {% if entry.has_rated %}<span style="color: green">rated</span>{% else %}<span style="color: red">not rated</span>{% endif %}
  {% endif %}
</h3>

{% if entry.files %}
<ul>
 {% for file in entry.files %}
  {% if file.is_final %}
  <li><a href="{{ file.content.url }}">{{ file.filename }}</a></li>
   &mdash; {{ file.description }}
   ({{ file.pretty_size }}
   on {{ file.created|date:"Y/m/d" }})
  {% endif %}
 {% endfor %}
</ul>
{% endif %}

{% with entry.entry as e %}
{% if e.description %}{{ e.description|safe }}{% endif %}
<p>
  {% if e.is_team %}
  Team:
   {% for user in e.users.all %}
    <a href="{% url 'user_display' user.username %}">{{ user.username }}</a>
   {% endfor %}
  {% else %}
   Entrant: <a href="{% url 'user_display' e.user.username %}">{{ e.user.username }}</a>
  {% endif %}
  </p>
{% endwith %}

</div>
{% endfor %}

</div>
{% endblock %}
